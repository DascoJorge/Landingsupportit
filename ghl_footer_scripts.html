<script src="https://cdnjs.cloudflare.com/ajax/libs/Swiper/11.0.5/swiper-bundle.min.js"></script>

<script>
    /**
     * SUPPORT IT - CORE LOGIC
     * Optimized for GoHighLevel Implementation
     */
    document.addEventListener('DOMContentLoaded', () => {
        console.log("Support IT Script Loaded - Elite Flow Active");

        // 1. NAVBAR SCROLL
        const navbar = document.getElementById('navbar');
        window.addEventListener('scroll', () => {
            if (navbar) {
                if (window.scrollY > 50) navbar.classList.add('scrolled');
                else navbar.classList.remove('scrolled');
            }
        });

        // 2. COUNTERS
        const counters = document.querySelectorAll('.counter');
        const animateCounters = () => {
            counters.forEach(counter => {
                if (counter.classList.contains('animated')) return;
                counter.classList.add('animated');
                const target = +counter.getAttribute('data-target');
                let current = 0;
                const increment = target / 100;
                const timer = setInterval(() => {
                    current += increment;
                    if (current >= target) {
                        counter.innerText = target;
                        clearInterval(timer);
                    } else {
                        counter.innerText = Math.ceil(current);
                    }
                }, 20);
            });
        };

        // 3. REVEAL OBSERVER
        const revealObserver = new IntersectionObserver((entries) => {
            entries.forEach(entry => {
                if (entry.isIntersecting) {
                    entry.target.classList.add('active');
                    if (entry.target.querySelector('.counter')) animateCounters();
                }
            });
        }, { threshold: 0.1 });

        document.querySelectorAll('.reveal, .footer-col, .ai-feature-highlight').forEach(el => {
            revealObserver.observe(el);
        });

        // 4. TYPEWRITER
        const typewriterElement = document.getElementById('typewriter');
        if (typewriterElement) {
            const texts = ["Seguridad Avanzada", "Redes de Fibra", "CRM Inteligente", "PÃ¡ginas Web"];
            let count = 0; let index = 0;
            (function type() {
                if (count === texts.length) count = 0;
                let currentText = texts[count];
                let letter = currentText.slice(0, ++index);
                typewriterElement.textContent = letter;
                if (letter.length === currentText.length) {
                    setTimeout(() => { index = 0; count++; setTimeout(type, 500); }, 2000);
                } else { setTimeout(type, 100); }
            }());
        }

        // 5. CAROUSEL
        if (document.querySelector('.premium-carousel')) {
            new Swiper('.premium-carousel', {
                loop: true,
                autoplay: { delay: 4000 },
                pagination: { el: '.swiper-pagination', clickable: true },
                navigation: { nextEl: '.swiper-button-next', prevEl: '.swiper-button-prev' },
                speed: 800
            });
        }

        // 6. TILT EFFECT (SERVICE CARDS)
        document.querySelectorAll('.service-card-flip').forEach(card => {
            const inner = card.querySelector('.service-card-inner');
            card.addEventListener('mousemove', (e) => {
                const rect = card.getBoundingClientRect();
                const x = e.clientX - rect.left - rect.width / 2;
                const y = e.clientY - rect.top - rect.height / 2;
                if (inner) inner.style.transform = `rotateY(${180 + x / 15}deg) rotateX(${-y / 15}deg)`;
            });
            card.addEventListener('mouseleave', () => {
                if (inner) inner.style.transform = 'rotateY(0deg) rotateX(0deg)';
            });
        });
    });
</script>